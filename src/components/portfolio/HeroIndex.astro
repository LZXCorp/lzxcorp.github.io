---
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";
import { getLanguage } from "../../utils/languages";

const [staticData] = await getCollection("staticData");
const { profileAlt, profileLink, profileImage, profileName, profileTitle, github } =
  staticData.data;

const toolKeys = [
  "html",
  "javascript",
  "ts",
  "node",
  "firebase",
  "mysql",
  "cloudflare",
  "git",
  "php",
  "aws",
  "python",
  "docker",
  "wazuh",
  "cisco",
  "ad"
];

---

<section
  id="home"
  class="scroll-m-16 px-8 py-8 max-sm:px-4"
  aria-label="Professional profile and introduction"
>
  <div class="mx-auto max-w-7xl">
    <div class="flex items-center gap-8 max-md:flex-col-reverse">
      <div class="flex-1">
        <h1 class="text-4xl font-black leading-tight text-zinc-900 dark:text-white max-xl:text-3xl max-lg:text-2xl max-sm:text-center">
          {profileName} ðŸ‘‹
        </h1>
        <p class="mt-3 text-lg font-semibold leading-8 text-zinc-700 dark:text-zinc-300 max-xl:text-base max-sm:text-center">
          {profileTitle} passionate about creating automations, homelabbing and formulating Cybersecurity solutions.
        </p>
        <div class="mt-6 flex items-center gap-4 max-sm:justify-center">
          <a
            href={'blog'}
            class="inline-flex items-center rounded-full border border-current px-5 py-2.5 text-sm font-semibold text-zinc-900 dark:text-zinc-100 transition-all duration-300 hover:-translate-y-0.5 hover:shadow-md hover:bg-zinc-900 hover:text-white dark:hover:bg-white dark:hover:text-zinc-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-500/70 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-zinc-900"
            aria-label="View about me page"
          >
            Blog Page
          </a>
          <a
            href={github}
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-flex items-center gap-2 text-sm font-semibold text-zinc-700 dark:text-zinc-300 transition-all duration-300 underline-offset-4 decoration-2 hover:underline hover:text-rose-600 dark:hover:text-rose-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-500/70 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-zinc-900"
            aria-label="View this site's code repository on GitHub"
          >
            <Icon class="h-5 w-5 transition-transform duration-300 group-hover:translate-x-0.5 group-hover:scale-110" name="github" aria-hidden="true" />
            <span>Code</span>
          </a>
        </div>
      </div>
      <div class="flex-shrink-0 max-sm:flex max-sm:justify-center">
        <a href={profileLink} aria-label="View about me page" class="block">
          <img
            src={profileImage}
            alt={profileAlt}
            width="256"
            height="256"
            loading="eager"
            fetchpriority="high"
            decoding="async"
            class="h-64 w-64 rounded-full object-cover max-sm:h-40 max-sm:w-40"
          />
        </a>
      </div>
    </div>

    <div class="mt-10" role="region" aria-label="Tech stack">
      <div class="stack-group group relative overflow-hidden px-6">
        <div class="marquee-track">
          <div class="marquee flex items-center gap-6">
          <ul class="flex items-center gap-6 py-2 list-none m-0 pl-0">
            {toolKeys.map((key) => {
              const lang = getLanguage(key);
              return (
                <li class="shrink-0" title={lang.name}>
                  <Icon
                    name={lang.iconName}
                    class="h-10 w-10 text-zinc-700 dark:text-zinc-300"
                    aria-label={lang.name}
                  />
                </li>
              );
            })}
          </ul>
          <ul class="flex items-center gap-6 py-2 list-none m-0 pl-0" aria-hidden="true">
            {toolKeys.map((key) => {
              const lang = getLanguage(key);
              return (
                <li class="shrink-0">
                  <Icon
                    name={lang.iconName}
                    class="h-10 w-10 text-zinc-700 dark:text-zinc-300"
                    aria-hidden="true"
                  />
                </li>
              );
            })}
          </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .marquee-track {
    display: inline-flex;
    width: 100%;
  }
  .marquee {
    display: inline-flex;
    width: max-content; /* content width for both lists */
    will-change: transform;
    animation: marquee 28s linear infinite;
  }
  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }
  /* Pause scroll on hover of the stack container */
  .stack-group:hover .marquee {
    animation-play-state: paused;
  }
  @media (prefers-reduced-motion: reduce) {
    .marquee {
      animation: none !important;
      transform: none !important;
    }
  }
</style>
